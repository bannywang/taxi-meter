# 🚕 Taxi Meter Web App (專業計程車跳表網頁版)

這是一個基於現代網頁技術 (HTML5 / ES6 Modules) 開發的計程車跳表應用程式。無需安裝 App，直接透過瀏覽器即可在 iOS 與 Android 上運行，具備高精度 GPS 軌跡記錄與背景執行能力。

**🔗 線上測試連結：** [點擊這裡開啟](https://bannywang.github.io/taxi-meter/)

---

## 🌟 核心功能 (Key Features)

### 1. 🎯 高精度計費系統
* **抗飄移演算法：** 設定 **3公尺** 移動門檻，有效過濾停車時 GPS 訊號飄移造成的「幽靈里程」。
* **精準距離計算：** 採用 **Haversine 公式** 計算地球曲面距離，比傳統直線距離更準確。
* **即時原地修正：** 修正了原地開始/結束計費時，地圖顯示錯誤的問題 (V8.2)。

### 2. ⚡ 背景執行穩定 (Anti-Sleep)
* **時間戳記校正 (Timestamp Correction)：** 不依賴 `setInterval` 累加，而是計算 `Date.now()` 差值。即使手機鎖定或瀏覽器進入背景凍結，喚醒後秒數依然 **100% 準確**。
* **螢幕喚醒鎖定 (Wake Lock API)：** 內建防止螢幕休眠機制，確保 GPS 在行駛過程中不中斷。

### 3. 💾 海量資料儲存 (IndexedDB)
* **本地資料庫技術：** 使用瀏覽器內建的 **IndexedDB** 儲存高解析度路徑軌跡，突破 `localStorage` 5MB 的限制。
* **長途行程不閃退：** 即使是數百公里的行程，也能穩定儲存並回放。
* **自動清理機制：** 每次啟動時自動檢查，自動刪除 **超過 7 天** 的過期資料，釋放手機空間。

### 4. 💰 彈性費率與管理
* **自訂費率：** 支援設定起跳價、每公里續程價、每分鐘延滯價。
* **多費率切換：** 可儲存多組設定（如：一般時段、夜間加成、春節費率）。
* **倍率加成：** 支援即時輸入倍率（如 x1.2），適用於特殊加價場景。
